{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "properties": {
    "restatedRequest": {
      "type": "string",
      "description": "The user's request restated in conversation context, with ambiguous references resolved to concrete meaning."
    },
    "automatableConfidence": {
      "type": "number",
      "minimum": 0,
      "maximum": 1,
      "description": "How automatable is this request (0.0-1.0). High (0.8+) = fully computer-automatable. Low (<0.3) = needs human input/clarification."
    },
    "steps": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Ordered steps to gather all the information needed to answer the user's question"
    },
    "singleTurn": {
      "type": "boolean",
      "description": "Could all the steps be consolidated and completed in a single turn?"
    },
    "estimatedMinutes": {
      "type": "number",
      "minimum": 0,
      "description": "Estimated minutes to complete all the steps, assuming web/file lookups take ~10 seconds each"
    },
    "webSearch": {
      "type": "object",
      "properties": {
        "helpful": { "type": "boolean" },
        "queries": { "type": "array", "items": { "type": "string" } }
      },
      "required": ["helpful", "queries"],
      "description": "Whether a web search would help and suggested queries"
    },
    "directResponse": {
      "type": "string",
      "description": "How the assistant would respond to the user knowing the steps outlined above"
    },
    "relevantMemories": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "name": { "type": "string" },
          "confidence": { "type": "number", "minimum": 0, "maximum": 1 }
        },
        "required": ["name", "confidence"]
      },
      "description": "Memory models directly relevant to this message with confidence score (0-1). Empty array means NONE."
    },
    "relatedMemories": {
      "type": "array",
      "items": { "type": "string" },
      "maxItems": 3,
      "description": "Up to 3 other memory topics that might relate to this topic"
    },
    "requestType": {
      "type": "string",
      "enum": ["simple_command", "direct_task", "compound_task", "conversational", "rfi"],
      "description": "Classification of the request type"
    }
  },
  "required": ["restatedRequest", "automatableConfidence", "relevantMemories", "steps", "singleTurn", "estimatedMinutes", "directResponse", "requestType"]
}
